---
import { ArrowRight, Code, Zap, Globe, Rocket, Terminal, Book, Layout, Database, Server, Smartphone, PenTool, Image, MessageSquare, Heart, Star, Cloud, Lock, Shield, Settings, Users, Briefcase } from 'lucide-react';
import siteConfig from '../../site.config.json';

const { hero } = siteConfig.customization;

// Map icon strings to components
const IconMap: Record<string, any> = {
  ArrowRight, Code, Zap, Globe, Rocket, Terminal, Book, Layout, Database, Server, Smartphone, PenTool, Image, MessageSquare, Heart, Star, Cloud, Lock, Shield, Settings, Users, Briefcase
};

const BadgeIcon = hero?.badge?.icon && IconMap[hero.badge.icon] ? IconMap[hero.badge.icon] : Zap;
const PrimaryActionIcon = hero?.actions?.primary?.icon && IconMap[hero.actions.primary.icon] ? IconMap[hero.actions.primary.icon] : ArrowRight;
const SecondaryActionIcon = hero?.actions?.secondary?.icon && IconMap[hero.actions.secondary.icon] ? IconMap[hero.actions.secondary.icon] : null;

// Helper to get icon for features
const getFeatureIcon = (iconName: string) => {
  return IconMap[iconName] || Code;
};
---

<section class="relative overflow-hidden hero-background">
  <div class="dark-overlay absolute inset-0"></div>
  <!-- Background Pattern -->
  <div class="absolute inset-0 bg-grid-pattern opacity-5"></div>
  
  <div class="relative max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-20 lg:py-32">
    <div class="text-center">
      <!-- Badge -->
      {hero?.badge && (
        <div class="inline-flex items-center px-4 py-2 rounded-full badge badge-primary text-sm font-medium mb-8 animate-fade-in">
          <BadgeIcon className="w-4 h-4 mr-2" />
          {hero.badge.text}
        </div>
      )}

      <!-- Main Heading -->
      <h1 class="text-4xl sm:text-5xl lg:text-6xl font-bold text-gray-900 dark:text-white mb-6 animate-slide-up">
        {hero?.title?.text}
        <span class="text-primary gradient-text">
          {hero?.title?.highlightedText}
        </span>
        {hero?.title?.suffixText && (
          <span>
            {hero?.title?.suffixText}
          </span>
        )}
      </h1>

      <!-- Subtitle -->
      <p class="text-xl text-gray-600 dark:text-gray-300 mb-8 max-w-3xl mx-auto leading-relaxed animate-slide-up animation-delay-200">
        {hero?.subtitle}
      </p>

      <!-- CTA Buttons -->
      <div class="flex flex-col sm:flex-row gap-4 justify-center items-center mb-12 animate-slide-up animation-delay-400">
        {hero?.actions?.primary && (
          <a
            href={import.meta.env.BASE_URL + hero.actions.primary.link}
            class="btn-primary group inline-flex items-center px-8 py-4 text-lg font-semibold"
          >
            {hero.actions.primary.text}
            {PrimaryActionIcon && <PrimaryActionIcon className="ml-2 w-5 h-5 group-hover:translate-x-1 transition-transform" />}
          </a>
        )}
        {hero?.actions?.secondary && (
          <a
            href={import.meta.env.BASE_URL + hero.actions.secondary.link}
            class="btn-secondary inline-flex items-center px-8 py-4 text-lg font-semibold"
          >
            {hero.actions.secondary.text}
            {SecondaryActionIcon && <SecondaryActionIcon className="ml-2 w-5 h-5" />}
          </a>
        )}
      </div>

      <!-- Feature Icons -->
      <div class="grid grid-cols-1 sm:grid-cols-3 gap-8 max-w-2xl mx-auto animate-fade-in animation-delay-600">
        {hero?.features?.map((feature) => {
          const FeatureIcon = getFeatureIcon(feature.icon);
          return (
            <div class="flex flex-col items-center text-center">
              <div class="w-12 h-12 icon-box rounded-lg flex items-center justify-center mb-3">
                <FeatureIcon className="w-6 h-6 icon-color" />
              </div>
              <h3 class="font-semibold text-gray-900 dark:text-white mb-1">{feature.title}</h3>
              <p class="text-sm text-gray-600 dark:text-gray-400">{feature.description}</p>
            </div>
          );
        })}
      </div>
    </div>
  </div>

  <!-- Decorative Elements -->
  <div class="blob blob-1"></div>
  <div class="blob blob-2"></div>
  <div class="blob blob-3"></div>
</section>

<style>
  .hero-background {
    background: linear-gradient(to bottom right, var(--color-primary-50), white, var(--color-primary-100));
  }

  :global(.dark) .hero-background {
    background: linear-gradient(to bottom right, #0f172a, #1e293b, #0f172a);
  }

  .dark-overlay {
    pointer-events: none;
  }

  .gradient-text {
    background: linear-gradient(to right, var(--color-primary), var(--color-primary-dark));
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .icon-box {
    background-color: var(--color-primary-lighter);
  }

  :global(.dark) .icon-box {
    background-color: var(--color-primary-darker);
    opacity: 0.3;
  }

  .icon-color {
    color: var(--color-primary-dark);
  }

  :global(.dark) .icon-color {
    color: var(--color-primary-lighter);
  }

  .blob {
    position: absolute;
    width: 18rem;
    height: 18rem;
    border-radius: 9999px;
    mix-blend-mode: multiply;
    filter: blur(64px);
    opacity: 0.2;
    animation: blob 7s infinite;
  }

  .blob-1 {
    background-color: var(--color-primary-300);
    top: 0;
    left: 0;
  }

  .blob-2 {
    background-color: var(--color-primary-400);
    top: 0;
    right: 0;
    animation-delay: 2s;
  }

  .blob-3 {
    background-color: var(--color-primary);
    bottom: -2rem;
    left: 5rem;
    animation-delay: 4s;
  }

  .bg-grid-pattern {
    background-image: radial-gradient(circle, #e5e7eb 1px, transparent 1px);
    background-size: 20px 20px;
  }

  .dark .bg-grid-pattern {
    background-image: radial-gradient(circle, #374151 1px, transparent 1px);
  }

  @keyframes blob {
    0% {
      transform: translate(0px, 0px) scale(1);
    }
    33% {
      transform: translate(30px, -50px) scale(1.1);
    }
    66% {
      transform: translate(-20px, 20px) scale(0.9);
    }
    100% {
      transform: translate(0px, 0px) scale(1);
    }
  }

  .animation-delay-200 {
    animation-delay: 0.2s;
  }

  .animation-delay-400 {
    animation-delay: 0.4s;
  }

  .animation-delay-600 {
    animation-delay: 0.6s;
  }
</style>